<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.js"></script>
	<script src="app.js"></script>
	 <link rel="stylesheet" type="text/css" href="kalendar.css">
  	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  	<script src="kalendar.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Angular Template Document</title>
</head>

<body ng-app="testApp">
	<div ng-controller="testController" ng-init="init()">
<!-- kalendar -->
Angular Version
	<p>init data: {{items}}</p>
	
	  <div id="cal_div">insert calender here</div>

<!-- end kalendar -->
	<p></p>
	<button id="button">Init Kalendar</button>

	

</div><!--end testController -->
<script>
  $('#button').click(function(){
    var data = angular
        .element(document.querySelector('[ng-controller="testController"]'))
        .scope()
        .items;
    
    console.log("here's the Angular data: ", data[0].year );
    console.log("amount of data: ", data.length );

    var bookedDates = []

     for (i=0 ; i < data.length ; i++ ) {
	      bookedObj = new Date (data[i].year , data[i].month , data[i].day );
	      bookedDates.push(bookedObj);
	    }

    console.log ("final bookedData array: ", bookedDates );


				var kal = new Kalender();
				    var cal_div = $("#cal_div");
				     kal.insertCalender(cal_div, bookedDates, function(datePicked){
				      console.log("picked: "+datePicked);
				    });  
	});
</script>  
<script>
	$(document).ready( function () {
		alert("document ready...");
				  	  
	});
		  
</script>      
</body>
</html>